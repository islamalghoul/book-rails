<% if auther_signed_in? %>
  <%= form_for_filterrific @filterrific do |f| %>
    <%= f.label :by_name %>
    <%= f.text_field :by_name %>

    <%= f.label :by_auther_name %>
    <%= f.text_field :by_auther_name %>

    <%= f.label :by_release_date %>
   <%= f.date_field :by_release_date, as: :date, value: f.object.try(:strftime,"%m/%d/%Y") %>

    <%= f.submit 'Filter', class: 'btn btn-primary' %>
  <% end %>
  <table class="table table-striped table-bordered table-hover">
    <thead class="thead-dark">
      <tr>
        <th>Name</th>
        <th>Release Date</th>
        <th>Author</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @books.each do |book| %>
        <tr>
          <td><%= link_to book.name, book %></td>
          <td><%= Date.parse(book.release_date.to_s).strftime("%Y-%m-%d") if book.release_date.present? %></td>
          <td><%= book.auther.name %></td>
          <td>
            <% if current_auther == book.auther %>
              <%= link_to 'Show', book, class: "btn btn-info btn-sm" %>
              <%= link_to 'Edit', edit_book_path(book), class: "btn btn-warning btn-sm" %>
              <%= link_to 'Delete', book, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger btn-sm" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="text-center">
    <%= will_paginate @books %> <!-- Pagination links -->
    <%= link_to 'New Book', new_book_path, class: "btn btn-secondary" %>
  </div>
<% else %>
  <script>
    window.location.href = '<%= new_auther_session_path %>';
  </script>
<% end %>
